{"version":3,"file":"form-handler.js","sources":["../../../src/utils/form-handler.ts"],"sourcesContent":["import type { FormOptions, PostPayloadOptions } from '../../interfaces/utils/form-handler';\n\nexport class FormHandler {\n  options: FormOptions;\n  constructor(options: FormOptions) {\n    this.options = options;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/require-await\n  async submitData<T>(payload: T): Promise<void> {\n    const extendedPayload: PostPayloadOptions = {\n      ...payload,\n      state: this.options.state,\n    };\n\n    const $form = this.buildForm(extendedPayload);\n\n    document.body.appendChild($form);\n    $form.submit();\n  }\n\n  private buildForm(payload: PostPayloadOptions): HTMLFormElement {\n    const $form = document.createElement('form');\n    $form.method = 'POST';\n    $form.action = this.options.route ?? '';\n\n    Object.entries(payload).forEach(([key, value]) => {\n      const input = document.createElement('input');\n      input.type = 'hidden';\n      input.name = key;\n      input.value = String(value ?? '');\n      $form.appendChild(input);\n    });\n\n    this.addTelemetryField($form);\n\n    return $form;\n  }\n\n  private addTelemetryField(form: HTMLFormElement): HTMLFormElement {\n    const input = document.createElement('input');\n    const sdkName = __SDK_NAME__;\n    const sdkVersion = __SDK_VERSION__;\n    input.type = 'hidden';\n    input.name = 'acul-sdk';\n    input.value = `${sdkName}@${sdkVersion}`;\n    form.appendChild(input);\n\n    return form;\n  }\n}\n"],"names":["FormHandler","options","constructor","this","submitData","payload","extendedPayload","state","$form","buildForm","document","body","appendChild","submit","createElement","method","action","route","Object","entries","forEach","key","value","input","type","name","String","addTelemetryField","form"],"mappings":"MAEaA,EACXC,QACA,WAAAC,CAAYD,GACVE,KAAKF,QAAUA,EAIjB,gBAAMG,CAAcC,GAClB,MAAMC,EAAsC,IACvCD,EACHE,MAAOJ,KAAKF,QAAQM,OAGhBC,EAAQL,KAAKM,UAAUH,GAE7BI,SAASC,KAAKC,YAAYJ,GAC1BA,EAAMK,SAGA,SAAAJ,CAAUJ,GAChB,MAAMG,EAAQE,SAASI,cAAc,QAcrC,OAbAN,EAAMO,OAAS,OACfP,EAAMQ,OAASb,KAAKF,QAAQgB,OAAS,GAErCC,OAAOC,QAAQd,GAASe,SAAQ,EAAEC,EAAKC,MACrC,MAAMC,EAAQb,SAASI,cAAc,SACrCS,EAAMC,KAAO,SACbD,EAAME,KAAOJ,EACbE,EAAMD,MAAQI,OAAOJ,GAAS,IAC9Bd,EAAMI,YAAYW,EAAM,IAG1BpB,KAAKwB,kBAAkBnB,GAEhBA,EAGD,iBAAAmB,CAAkBC,GACxB,MAAML,EAAQb,SAASI,cAAc,SAQrC,OALAS,EAAMC,KAAO,SACbD,EAAME,KAAO,WACbF,EAAMD,MAAQ,oCACdM,EAAKhB,YAAYW,GAEVK"}